<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Everbloom: EryStart</title>
    <style>
        :root {
            --bg: #1a1a15;
            --panel: #2d2d24;
            --accent: #c08d4b;
            --border: #4a4a3a;
            --text: #f7e7d6;
            --safe-top: env(safe-area-inset-top);
            --safe-bottom: env(safe-area-inset-bottom);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Apple SD Gothic Neo', sans-serif; }
        body { background: var(--bg); color: var(--text); height: 100vh; overflow: hidden; display: flex; flex-direction: column; }

        /* 1. ì‹œì‘ í™”ë©´ */
        #splash {
            position: fixed; inset: 0; z-index: 9999;
            background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), url('https://img.freepik.com/free-photo/mystical-ancient-ruins-forest-digital-art_23-2151121014.jpg');
            background-size: cover; background-position: center;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }
        .logo { font-size: 3.5rem; font-weight: 900; color: var(--accent); letter-spacing: 5px; }

        /* 2. ë©”ì¸ UI */
        header { padding: calc(var(--safe-top) + 10px) 20px 10px; background: var(--panel); border-bottom: 2px solid var(--border); display: flex; justify-content: space-between; }
        
        .main-content { flex: 1; display: flex; flex-direction: column; overflow: hidden; }
        
        /* ì¼ëŸ¬ìŠ¤íŠ¸ (TRPGí’ ê³ ì •) */
        .scene-view { width: 100%; height: 30vh; background: #000; border-bottom: 2px solid var(--accent); }
        .scene-view img { width: 100%; height: 100%; object-fit: cover; }

        /* ë¡œê·¸ & íƒ­ ì‹œìŠ¤í…œ */
        .tab-menu { display: flex; background: var(--panel); border-bottom: 1px solid var(--border); }
        .tab-btn { flex: 1; padding: 12px; border: none; background: none; color: var(--text); font-weight: bold; font-size: 14px; }
        .tab-btn.active { border-bottom: 3px solid var(--accent); color: var(--accent); }

        .view-pane { flex: 1; overflow-y: auto; padding: 15px; display: none; }
        .view-pane.active { display: block; }

        /* ì¸ë²¤í† ë¦¬ & ìŠ¤íƒ¯ */
        .stat-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 20px; }
        .stat-card { background: var(--panel); padding: 10px; border-radius: 8px; border: 1px solid var(--border); }
        .item-slot { background: #3d3d34; padding: 12px; border-radius: 8px; margin-bottom: 8px; display: flex; justify-content: space-between; align-items: center; }
        .equip-btn { background: var(--accent); color: #000; padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: bold; }

        /* í•˜ë‹¨ ì»¨íŠ¸ë¡¤ (ì–¸ë”ë°” ë°©ì§€) */
        footer { padding: 15px 15px calc(var(--safe-bottom) + 30px); background: var(--panel); border-top: 2px solid var(--border); }
        .choice-list { display: flex; flex-direction: column; gap: 8px; }
        .btn { background: #3d3d34; border: 1px solid var(--border); color: #fff; padding: 16px; border-radius: 10px; font-weight: bold; text-align: left; }
        .btn:active { background: var(--accent); color: #000; }

        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.3; } }
    </style>
</head>
<body onclick="tryStart()">

    <div id="splash">
        <div class="logo">EVERBLOOM</div>
        <div style="margin-top: 40vh; animation: pulse 2s infinite;">TOUCH TO START</div>
    </div>

    <div id="game-ui" style="display:none; flex-direction:column; height:100%;">
        <header>
            <div style="font-weight:bold;">ğŸŒ¿ EryStart Chronicles</div>
            <div id="turn-txt">Turn 1</div>
        </header>

        <div class="main-content">
            <div class="scene-view">
                <img id="main-img" src="https://img.freepik.com/free-photo/majestic-stone-gate-mystical-forest-digital-art_23-2151121025.jpg">
            </div>

            <div class="tab-menu">
                <button class="tab-btn active" onclick="showTab('log')">ëª¨í—˜ë¡œê·¸</button>
                <button class="tab-btn" onclick="showTab('status')">ìºë¦­í„°/ì¸ë²¤í† ë¦¬</button>
            </div>

            <div id="tab-log" class="view-pane active">
                <div id="log-content">
                    <p style="color:var(--accent); font-weight:bold; margin-bottom:10px;">[ì•ˆë‚´] ìœ ì ì˜ ìˆ²ì— ë“¤ì–´ì™”ìŠµë‹ˆë‹¤.</p>
                </div>
            </div>

            <div id="tab-status" class="view-pane">
                <div class="stat-grid">
                    <div class="stat-card">âš”ï¸ ê³µê²©ë ¥: <span id="stat-atk">10</span></div>
                    <div class="stat-card">ğŸ›¡ï¸ ë°©ì–´ë ¥: <span id="stat-def">5</span></div>
                    <div class="stat-card">â¤ï¸ ì²´ë ¥: <span id="stat-hp">100</span></div>
                    <div class="stat-card">ğŸ’° ê³¨ë“œ: <span id="stat-gold">50</span></div>
                </div>
                <h4 style="margin-bottom:10px; color:var(--accent);">ğŸ’ ì†Œì§€í’ˆ ìƒì</h4>
                <div id="inventory-list">
                    <p style="font-size:12px; opacity:0.5;">ê°€ë°©ì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.</p>
                </div>
            </div>
        </div>

        <footer>
            <div class="choice-list" id="choice-area">
                </div>
        </footer>
    </div>

<script>
    let isStarted = false;
    let turn = 1;
    let player = { hp: 100, atk: 10, def: 5, gold: 50, inv: [] };

    // TRPGí’ ì¼ëŸ¬ìŠ¤íŠ¸ ë°ì´í„°
    const scenes = {
        start: {
            img: "https://img.freepik.com/free-photo/mystical-ancient-ruins-forest-digital-art_23-2151121014.jpg",
            text: "ì—ë²„ë¸”ë£¸ ìˆ²ì˜ ì…êµ¬ì…ë‹ˆë‹¤. ì„œì–‘ì‹ ëŒë²½ê³¼ ë™ì–‘ì‹ ê¸°ì™€ê°€ ë’¤ì„ì¸ ê¸°ê´´í•œ ìœ ì ì´ ë³´ì…ë‹ˆë‹¤.",
            choices: [
                { t: "ğŸ” ìœ ì  ë‚´ë¶€ë¥¼ ìˆ˜ìƒ‰í•œë‹¤", next: "explore" },
                { t: "ğŸ¡ ì•ˆê°œ ë‚€ ë§ˆì„ë¡œ ì´ë™", next: "town" }
            ]
        },
        explore: {
            img: "https://img.freepik.com/free-photo/fierce-warrior-confronting-monster-forest-digital-art_23-2151121050.jpg",
            text: "ìœ ì  í‹ˆìƒˆì—ì„œ ë…¹ìŠ¨ ì¹´íƒ€ë‚˜ë¥¼ ë°œê²¬í–ˆìŠµë‹ˆë‹¤! í•˜ì§€ë§Œ ë’¤ì—ì„œ ìˆ²ì˜ ìˆ˜í˜¸ìê°€ ë‚˜íƒ€ë‚©ë‹ˆë‹¤.",
            choices: [
                { t: "ğŸ—¡ï¸ ì¹´íƒ€ë‚˜ë¥¼ ì§‘ì–´ë“¤ê³  ì‹¸ìš´ë‹¤", next: "get_item" },
                { t: "ğŸƒ ì¼ë‹¨ ë„ë§ì¹œë‹¤", next: "start" }
            ]
        },
        town: {
            img: "https://img.freepik.com/free-photo/ancient-japanese-village-night-digital-art_23-2151025000.jpg",
            text: "ë™ì–‘ì˜ ìƒ‰ì±„ê°€ ê°•í•œ ë§ˆì„ì…ë‹ˆë‹¤. ëŒ€ì¥ì¥ì´ê°€ ë‹¹ì‹ ì˜ ì¥ë¹„ì— ê´€ì‹¬ì„ ë³´ì…ë‹ˆë‹¤.",
            choices: [
                { t: "ğŸ› ï¸ ë°©ì–´êµ¬ ìƒì  ë°©ë¬¸", next: "shop" },
                { t: "ğŸŒ³ ë‹¤ì‹œ ìˆ²ìœ¼ë¡œ ë‚˜ê°„ë‹¤", next: "start" }
            ]
        }
    };

    function tryStart() {
        if (!isStarted) {
            isStarted = true;
            document.getElementById('splash').style.display = 'none';
            document.getElementById('game-ui').style.display = 'flex';
            renderScene('start');
        }
    }

    function showTab(type) {
        document.querySelectorAll('.view-pane, .tab-btn').forEach(el => el.classList.remove('active'));
        document.getElementById('tab-' + type).classList.add('active');
        event.target.classList.add('active');
    }

    function renderScene(key) {
        const s = scenes[key];
        if (key === 'get_item') {
            addItem("ë…¹ìŠ¨ ì¹´íƒ€ë‚˜", 5, 0);
            renderScene('start');
            return;
        }
        if (key === 'shop') {
            addItem("ê°€ì£½ ê°‘ì˜·", 0, 8);
            renderScene('town');
            return;
        }

        document.getElementById('main-img').src = s.img;
        addLog(s.text);

        const area = document.getElementById('choice-area');
        area.innerHTML = '';
        s.choices.forEach(c => {
            const b = document.createElement('button');
            b.className = 'btn';
            b.innerText = c.t;
            b.onclick = (e) => {
                e.stopPropagation();
                turn++;
                document.getElementById('turn-txt').innerText = "Turn " + turn;
                renderScene(c.next);
            };
            area.appendChild(b);
        });
    }

    function addLog(msg) {
        const box = document.getElementById('log-content');
        const p = document.createElement('p');
        p.style.marginBottom = "10px";
        p.innerText = "> " + msg;
        box.prepend(p);
    }

    function addItem(name, atk, def) {
        player.inv.push({ name, atk, def, eq: false });
        addLog(`[íšë“] ${name}ì„(ë¥¼) ê°€ë°©ì— ë„£ì—ˆìŠµë‹ˆë‹¤.`, true);
        updateInv();
    }

    function updateInv() {
        const list = document.getElementById('inventory-list');
        list.innerHTML = '';
        player.inv.forEach((item, idx) => {
            const div = document.createElement('div');
            div.className = 'item-slot';
            div.innerHTML = `
                <span>${item.name} (${item.atk > 0 ? 'ê³µ+'+item.atk : 'ë°©+'+item.def})</span>
                <button class="equip-btn" onclick="equip(${idx})">${item.eq ? 'í•´ì œ' : 'ì¥ì°©'}</button>
            `;
            list.appendChild(div);
        });
        updateStats();
    }

    function equip(idx) {
        const item = player.inv[idx];
        item.eq = !item.eq;
        addLog(item.eq ? `${item.name}ì„(ë¥¼) ì¥ì°©í–ˆìŠµë‹ˆë‹¤.` : `${item.name}ì„(ë¥¼) í•´ì œí–ˆìŠµë‹ˆë‹¤.`);
        updateInv();
    }

    function updateStats() {
        let bonusAtk = 0, bonusDef = 0;
        player.inv.forEach(i => { if(i.eq) { bonusAtk += i.atk; bonusDef += i.def; } });
        document.getElementById('stat-atk').innerText = 10 + bonusAtk;
        document.getElementById('stat-def').innerText = 5 + bonusDef;
    }
</script>
</body>
</html>
