<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<title>Everbloom</title>

<!-- PWA -->
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#2fc6b2">
<meta name="apple-mobile-web-app-capable" content="yes">

<style>
/* ===============================
   Everbloom Peacock Green Theme
   =============================== */
:root{
  --bg:#16302e;
  --panel:rgba(40,90,84,.82);
  --panel2:rgba(32,70,66,.74);
  --stroke:rgba(140,220,205,.28);

  --txt:#eafffb;
  --muted:rgba(234,255,251,.65);

  --accent:#2fc6b2;
  --accent2:#b8a8ff;
  --good:#3fe2a8;
  --bad:#ff6f8f;

  --r:18px;
}

*{box-sizing:border-box}
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"Noto Sans KR",sans-serif;
  color:var(--txt);
  background:
    radial-gradient(800px 500px at 20% 10%, rgba(47,198,178,.25), transparent 60%),
    radial-gradient(800px 500px at 80% 20%, rgba(184,168,255,.18), transparent 60%),
    var(--bg);
}

header{
  padding:16px;
  font-size:22px;
  font-weight:900;
}

main{
  padding:16px;
  display:grid;
  gap:16px;
}

.panel{
  background:linear-gradient(180deg,rgba(255,255,255,.08),rgba(255,255,255,.02)),var(--panel);
  border:1px solid var(--stroke);
  border-radius:var(--r);
  padding:14px;
  backdrop-filter:blur(14px);
}

h2{margin:0 0 8px;font-size:18px}

/* buttons */
button{
  padding:12px;
  border-radius:14px;
  border:1px solid var(--stroke);
  background:rgba(47,198,178,.28);
  color:var(--txt);
  font-weight:800;
  touch-action:manipulation;
}

/* ===============================
   iOS PWA CLICK FIX
   =============================== */
button{position:relative;z-index:5}
document{touch-action:manipulation}
</style>
</head>

<body>
<header>ğŸŒ¿ Everbloom</header>

<main>

<!-- CHARACTER -->
<section class="panel">
<h2>ğŸ§™ ìºë¦­í„°</h2>
<div id="charInfo"></div>
<button id="genChar">ìºë¦­í„° ìƒì„±</button>
</section>

<!-- PET -->
<section class="panel">
<h2>ğŸ¾ í«</h2>
<div id="petInfo"></div>
<button id="feedPet">ë¨¹ì´ ì£¼ê¸°</button>
<button id="breedPet">êµë°°</button>
</section>

<!-- RELATION -->
<section class="panel">
<h2>ğŸ’ ê´€ê³„</h2>
<div id="relationInfo"></div>
<button id="interactNpc">êµë¥˜</button>
</section>

<!-- CHILD -->
<section class="panel">
<h2>ğŸ‘¶ ìœ¡ì•„</h2>
<div id="childInfo"></div>
<button id="raiseChild">ì–‘ìœ¡</button>
</section>

<!-- MONSTER -->
<section class="panel">
<h2>ğŸ‘¾ ëª¬ìŠ¤í„° ì¼ëŸ¬ìŠ¤íŠ¸ í”„ë¡¬í”„íŠ¸</h2>
<textarea id="monsterPrompt" rows="4" style="width:100%"></textarea>
<button id="genMonster">ìƒì„±</button>
</section>

</main>

<script>
/* ===============================
   CORE DATA
   =============================== */
function rand(arr){return arr[Math.floor(Math.random()*arr.length)]}
function uid(){return Math.random().toString(36).slice(2)}

const S={
  char:null,
  pet:null,
  npc:{ affection:0, married:false },
  child:{ age:0, stats:0 }
};

/* ===============================
   CHARACTER
   =============================== */
function genCharacter(){
  S.char={
    name:rand(["ì´ë¦¬ì•ˆ","ì„¸ë¦¬ì•„","ë…¸ë°”","ë¦°"]),
    job:rand(["ìœ„ì €ë“œ","ë ˆì¸ì €","ë‚˜ì´íŠ¸"]),
    mood:rand(["ì˜¨í™”","ëƒ‰ì •","ì‹ ë¹„"])
  };
  render();
}

/* ===============================
   PET SYSTEM (ë¬´í•œ)
   =============================== */
function newPet(parentA,parentB){
  return{
    id:uid(),
    species:(parentA?.species||"seed")+"-"+(parentB?.species||rand(["beast","spirit","flora"])),
    stage:(parentA?.stage||1),
    affinity:0
  }
}

function feedPet(){
  S.pet.affinity+=20;
  if(S.pet.affinity>=100){
    S.pet.stage++;
    S.pet.affinity=0;
  }
  render();
}

function breedPet(){
  S.pet=newPet(S.pet,newPet());
  render();
}

/* ===============================
   RELATION / FAMILY
   =============================== */
function interact(){
  S.npc.affection+=20;
  if(S.npc.affection>=100) S.npc.married=true;
  render();
}

function raiseChild(){
  S.child.age++;
  S.child.stats+=rand([1,2,3]);
  render();
}

/* ===============================
   MONSTER PROMPT
   =============================== */
function genMonster(){
  document.getElementById("monsterPrompt").value=[
    "Japanese fantasy monster illustration",
    rand(["ancient","mystic","forest","ruins"]),
    rand(["dragon","beast","spirit"]),
    "high detail, no text"
  ].join(", ");
}

/* ===============================
   RENDER
   =============================== */
function render(){
  document.getElementById("charInfo").textContent=
    S.char ? `${S.char.name} / ${S.char.job} / ${S.char.mood}` : "ì—†ìŒ";

  document.getElementById("petInfo").textContent=
    S.pet ? `${S.pet.species} | ë‹¨ê³„ ${S.pet.stage} | í˜¸ê° ${S.pet.affinity}` : "ì—†ìŒ";

  document.getElementById("relationInfo").textContent=
    `í˜¸ê°ë„ ${S.npc.affection} ${S.npc.married?"(ê²°í˜¼)":""}`;

  document.getElementById("childInfo").textContent=
    `ë‚˜ì´ ${S.child.age} / ì„±ì¥ ${S.child.stats}`;
}

/* ===============================
   EVENTS (pointerup only)
   =============================== */
document.getElementById("genChar").addEventListener("pointerup",genCharacter);
document.getElementById("feedPet").addEventListener("pointerup",feedPet);
document.getElementById("breedPet").addEventListener("pointerup",breedPet);
document.getElementById("interactNpc").addEventListener("pointerup",interact);
document.getElementById("raiseChild").addEventListener("pointerup",raiseChild);
document.getElementById("genMonster").addEventListener("pointerup",genMonster);

/* init */
S.pet=newPet();
render();
</script>
</body>
</html>
