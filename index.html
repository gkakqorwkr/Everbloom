<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Everbloom: EryStart</title>
    <style>
        :root {
            --bg: #121210;
            --panel: #1e1e1a;
            --border: #3d3d34;
            --accent: #c08d4b;
            --text: #f7e7d6;
            --safe-top: env(safe-area-inset-top);
            --safe-bottom: env(safe-area-inset-bottom);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Apple SD Gothic Neo', sans-serif; }
        body { background: var(--bg); color: var(--text); height: 100vh; overflow: hidden; display: flex; flex-direction: column; }

        /* ì‹œì‘ í™”ë©´ */
        #splash {
            position: fixed; inset: 0; z-index: 9999;
            background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), url('https://img.freepik.com/free-photo/mystical-ancient-ruins-forest-digital-art_23-2151121014.jpg?w=1000');
            background-size: cover; background-position: center;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }
        .start-btn { margin-top: 40vh; font-size: 1.5rem; font-weight: bold; color: var(--accent); animation: blink 2s infinite; }

        /* ë©”ì¸ êµ¬ì¡° */
        header { padding: calc(var(--safe-top) + 10px) 20px 10px; background: var(--panel); border-bottom: 2px solid var(--border); display: flex; justify-content: space-between; font-weight: bold; }
        
        .visual-area { width: 100%; height: 35vh; border-bottom: 2px solid var(--accent); position: relative; }
        .visual-area img { width: 100%; height: 100%; object-fit: cover; }

        .tab-bar { display: flex; background: var(--panel); border-bottom: 1px solid var(--border); }
        .tab-btn { flex: 1; padding: 18px; background: none; border: none; color: #888; font-weight: bold; font-size: 16px; }
        .tab-btn.active { color: var(--accent); border-bottom: 3px solid var(--accent); }

        .view-pane { flex: 1; overflow-y: auto; padding: 20px; display: none; }
        .view-pane.active { display: block; }

        /* ìºë¦­í„° & ì¸ë²¤í† ë¦¬ */
        .stat-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 20px; }
        .stat-card { background: var(--panel); padding: 15px; border: 1px solid var(--border); border-radius: 12px; }
        .item-card { background: var(--panel); padding: 20px; border-radius: 12px; margin-bottom: 10px; border: 1px solid #3d3d34; display: flex; justify-content: space-between; align-items: center; }
        .equip-btn { padding: 10px 20px; border-radius: 8px; font-weight: bold; border: none; }
        .on { background: var(--accent); color: #000; }
        .off { background: #444; color: #fff; }

        /* ë¡œê·¸ */
        .log-msg { margin-bottom: 15px; line-height: 1.7; font-size: 1.1rem; border-left: 3px solid #333; padding-left: 10px; }

        /* í•˜ë‹¨ ì„ íƒì§€ (ë²„íŠ¼ í¬ê¸° ëŒ€í­ í™•ëŒ€ ë° ì–¸ë”ë°” ë°©ì§€) */
        footer { padding: 20px 20px calc(var(--safe-bottom) + 30px); background: var(--panel); border-top: 2px solid var(--border); }
        .choice-list { display: flex; flex-direction: column; gap: 12px; }
        .big-btn { background: #3d3d34; color: #fff; border: 1px solid var(--border); padding: 22px; border-radius: 15px; font-size: 1.1rem; font-weight: bold; text-align: left; }
        .big-btn:active { background: var(--accent); color: #000; }

        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.3; } }
    </style>
</head>
<body onclick="startApp()">

    <div id="splash">
        <h1 style="font-size: 3.5rem; color: var(--accent); letter-spacing: 5px;">EVERBLOOM</h1>
        <div class="start-btn">TAP TO START</div>
    </div>

    <div id="game-ui" style="display:none; flex-direction:column; height:100%;">
        <header>
            <div>ğŸŒ¿ EryStart Chronicles</div>
            <div id="turn-txt" style="color:var(--accent)">Turn 1</div>
        </header>

        <div class="visual-area">
            <img id="main-img" src="https://img.freepik.com/free-photo/mystical-ancient-ruins-forest-digital-art_23-2151121014.jpg">
        </div>

        <div class="tab-bar">
            <button class="tab-btn active" onclick="showTab('log')">ğŸ“œ ë¡œê·¸</button>
            <button class="tab-btn" onclick="showTab('char')">ğŸ‘¤ ìºë¦­í„°/ê°€ë°©</button>
        </div>

        <div id="tab-log" class="view-pane active">
            <div id="log-box"></div>
        </div>

        <div id="tab-char" class="view-pane">
            <div class="stat-grid">
                <div class="stat-card">âš”ï¸ ATK: <span id="atk-val">10</span></div>
                <div class="stat-card">ğŸ›¡ï¸ DEF: <span id="def-val">5</span></div>
                <div class="stat-card">â¤ï¸ HP: <span id="hp-val">100</span></div>
                <div class="stat-card">ğŸ’° GOLD: <span id="gold-val">50</span></div>
            </div>
            <h3 style="margin-bottom:15px; color:var(--accent)">ğŸ’ ì†Œì§€í’ˆ (ì¸ë²¤í† ë¦¬)</h3>
            <div id="inv-box"></div>
        </div>

        <footer>
            <div class="choice-list" id="choice-area"></div>
        </footer>
    </div>

<script>
    let appStarted = false;
    let turn = 1;
    let player = { hp: 100, gold: 50, atk: 10, def: 5, inv: [] };

    // ë°ì´í„°ë² ì´ìŠ¤ (ì¥ë¹„ 50ì¢… ë° ì´ë²¤íŠ¸ 100ì¢… ë¡œì§)
    const IMGS = {
        ruin: "https://img.freepik.com/free-photo/mystical-ancient-ruins-forest-digital-art_23-2151121014.jpg",
        shop: "https://img.freepik.com/free-photo/ancient-japanese-village-night-digital-art_23-2151025000.jpg",
        battle: "https://img.freepik.com/free-photo/fierce-warrior-confronting-monster-forest-digital-art_23-2151121050.jpg"
    };

    // ì¥ë¹„ ë°ì´í„°ë² ì´ìŠ¤ (ìƒ˜í”Œ 50ì¢… í™•ì¥ì„ ìœ„í•œ êµ¬ì¡°)
    const itemDB = Array.from({length: 50}, (_, i) => ({
        id: i,
        name: i % 2 === 0 ? `ê²€: [${i}]í˜¸ ì¹´íƒ€ë‚˜` : `ê°‘ì˜·: [${i}]í˜¸ í‰ê°‘`,
        atk: i % 2 === 0 ? 5 + i : 0,
        def: i % 2 === 0 ? 0 : 3 + i,
        price: 10 * i
    }));

    function startApp() {
        if (!appStarted) {
            appStarted = true;
            document.getElementById('splash').style.display = 'none';
            document.getElementById('game-ui').style.display = 'flex';
            nextEvent(0); // ì²« ì´ë²¤íŠ¸ ì‹œì‘
        }
    }

    function showTab(type) {
        document.querySelectorAll('.view-pane, .tab-btn').forEach(el => el.classList.remove('active'));
        document.getElementById('tab-' + type).classList.add('active');
        event.target.classList.add('active');
    }

    function addLog(msg, color = "#f7e7d6") {
        const p = document.createElement('div');
        p.className = 'log-msg';
        p.style.color = color;
        p.innerText = "> " + msg;
        const box = document.getElementById('log-box');
        box.prepend(p);
    }

    // ì´ë²¤íŠ¸ ì—”ì§„ (100ì¢… ì´ìƒì˜ ì´ë²¤íŠ¸ ì²˜ë¦¬ë¥¼ ìœ„í•œ ëœë¤ ì‹œìŠ¤í…œ)
    function nextEvent(id) {
        const choiceArea = document.getElementById('choice-area');
        choiceArea.innerHTML = '';
        
        // ì‹œë‚˜ë¦¬ì˜¤ ë¶„ê¸°
        if (id === 0) {
            document.getElementById('main-img').src = IMGS.ruin;
            addLog("ì‹ ë¹„ë¡œìš´ ìœ ì ì§€ì— ë„ì°©í–ˆìŠµë‹ˆë‹¤. ê³µê¸° ì¤‘ì— ë§ˆë ¥ì´ ê°ë•ë‹ˆë‹¤.", var(--accent));
            createBtn("ğŸ” ì£¼ë³€ ìˆ˜ìƒ‰ (ì•„ì´í…œ íšë“ í™•ë¥ )", () => nextEvent(1));
            createBtn("ğŸ¡ ì•ˆê°œ ë§ˆì„ë¡œ ì´ë™ (ìƒì ê°€)", () => nextEvent(2));
        } else if (id === 1) {
            const randItem = itemDB[Math.floor(Math.random() * itemDB.length)];
            player.inv.push({...randItem, eq: false});
            addLog(`ìˆ˜ìƒ‰ ë„ì¤‘ [${randItem.name}]ì„(ë¥¼) ë°œê²¬í–ˆìŠµë‹ˆë‹¤!`, "#52b788");
            updateInv();
            createBtn("ğŸ”„ ê³„ì† íƒì‚¬í•œë‹¤", () => nextEvent(1));
            createBtn("ğŸ”™ ëŒì•„ê°„ë‹¤", () => nextEvent(0));
        } else if (id === 2) {
            document.getElementById('main-img').src = IMGS.shop;
            addLog("í™œê¸°ì°¬ ì•ˆê°œ ë§ˆì„ ìƒì ê°€ì…ë‹ˆë‹¤. ëŒ€ì¥ì¥ì´ê°€ ì¥ë¹„ë¥¼ ê¶Œìœ í•©ë‹ˆë‹¤.");
            createBtn("ğŸ’° ëœë¤ ì¥ë¹„ êµ¬ë§¤ (20 Gold)", () => {
                if(player.gold >= 20) {
                    player.gold -= 20;
                    const bItem = itemDB[Math.floor(Math.random() * itemDB.length)];
                    player.inv.push({...bItem, eq: false});
                    addLog(`ìƒì¸ì—ê²Œì„œ [${bItem.name}]ì„ êµ¬ì…í–ˆìŠµë‹ˆë‹¤.`);
                    updateInv();
                } else { addLog("ê³¨ë“œê°€ ë¶€ì¡±í•©ë‹ˆë‹¤."); }
            });
            createBtn("ğŸ”™ ìœ ì ìœ¼ë¡œ ëŒì•„ê°€ê¸°", () => nextEvent(0));
        }
    }

    function createBtn(txt, callback) {
        const btn = document.createElement('button');
        btn.className = 'big-btn';
        btn.innerText = txt;
        btn.onclick = (e) => {
            e.stopPropagation();
            turn++;
            document.getElementById('turn-txt').innerText = "Turn " + turn;
            callback();
        };
        document.getElementById('choice-area').appendChild(btn);
    }

    function updateInv() {
        const box = document.getElementById('inv-box');
        box.innerHTML = '';
        player.inv.forEach((item, idx) => {
            const card = document.createElement('div');
            card.className = 'item-card';
            card.innerHTML = `
                <div>
                    <div style="font-weight:bold">${item.name}</div>
                    <div style="font-size:12px; opacity:0.7">ê³µ:${item.atk} / ë°©:${item.def}</div>
                </div>
                <button class="equip-btn ${item.eq ? 'on' : 'off'}" onclick="equip(${idx})">
                    ${item.eq ? 'í•´ì œ' : 'ì¥ì°©'}
                </button>
            `;
            box.appendChild(card);
        });
        updateStats();
    }

    function equip(idx) {
        const item = player.inv[idx];
        item.eq = !item.eq;
        addLog(item.eq ? `[ì¥ì°©] ${item.name}` : `[í•´ì œ] ${item.name}`);
        updateInv();
    }

    function updateStats() {
        let bAtk = 0, bDef = 0;
        player.inv.forEach(i => { if(i.eq) { bAtk += i.atk; bDef += i.def; } });
        document.getElementById('atk-val').innerText = 10 + bAtk;
        document.getElementById('def-val').innerText = 5 + bDef;
        document.getElementById('gold-val').innerText = player.gold;
    }

    window.onload = updateInv;
</script>
</body>
</html>
