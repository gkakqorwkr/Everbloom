<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Everbloom: EryStart</title>
    <style>
        :root {
            --bg: #121212;
            --panel: #1e1e1e;
            --accent: #52b788;
            --border: #333;
            --text: #e0e0e0;
            --safe-bottom: env(safe-area-inset-bottom);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { 
            background: var(--bg); color: var(--text); 
            font-family: 'Apple SD Gothic Neo', sans-serif;
            height: 100vh; overflow: hidden; display: flex; flex-direction: column;
        }

        /* 1. ì‹œì‘ í™”ë©´ */
        #splash {
            position: fixed; inset: 0; z-index: 1000;
            background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), 
                        url('https://img.freepik.com/free-photo/mystical-ancient-ruins-forest-digital-art_23-2151121014.jpg?t=st=1715832000');
            background-size: cover; background-position: center;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }
        .logo-title { font-size: 3.5rem; font-weight: 900; color: var(--accent); letter-spacing: 10px; text-shadow: 0 0 20px rgba(82,183,136,0.5); }
        .touch-hint { margin-top: 50vh; font-weight: bold; animation: pulse 2s infinite; }

        /* 2. ë©”ì¸ ê²Œì„ ë ˆì´ì•„ì›ƒ (ì•„ì´í° 15+ ìµœì í™”) */
        #game-root { display: none; flex-direction: column; height: 100%; padding-top: env(safe-area-inset-top); }

        header { padding: 15px 20px; border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center; background: var(--panel); }
        
        /* ì¼ëŸ¬ìŠ¤íŠ¸ ì˜ì—­ (í˜„ì‹¤ ì‚¬ì§„ ë°°ì œ) */
        .visual-box {
            width: 100%; height: 32vh; position: relative; overflow: hidden;
            background: #000; border-bottom: 2px solid var(--accent);
        }
        .visual-box img { width: 100%; height: 100%; object-fit: cover; transition: opacity 0.5s; }
        .location-tag { position: absolute; top: 15px; left: 15px; background: rgba(0,0,0,0.7); padding: 5px 12px; border-radius: 20px; font-size: 12px; color: var(--accent); border: 1px solid var(--accent); }

        /* ë¡œê·¸ ì˜ì—­ (ì¤‘ì•™ ì§‘ì¤‘) */
        .log-area {
            flex: 1; padding: 20px; overflow-y: auto;
            background: linear-gradient(to bottom, #181818, var(--bg));
            mask-image: linear-gradient(to top, black 90%, transparent 100%);
        }
        .log-p { margin-bottom: 15px; font-size: 1.05rem; line-height: 1.8; color: #ccc; animation: fadeIn 0.4s ease; }
        .log-p.event { color: #fff; font-weight: bold; border-left: 3px solid var(--accent); padding-left: 12px; }

        /* í•˜ë‹¨ ì¡°ì‘ë¶€ (ì–¸ë”ë°” í´ë¦­ ë°©ì§€: ì—¬ìœ ê³µê°„ ë„‰ë„‰íˆ í™•ë³´) */
        footer {
            background: var(--panel);
            padding: 20px 20px calc(var(--safe-bottom) + 30px); /* í•˜ë‹¨ ì—¬ë°± ì¶”ê°€ */
            border-top: 1px solid var(--border);
            box-shadow: 0 -10px 20px rgba(0,0,0,0.5);
        }

        .stats-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px; font-size: 13px; }
        .bar-wrap { height: 6px; background: #333; border-radius: 3px; margin-top: 5px; overflow: hidden; }
        .bar-fill { height: 100%; background: var(--accent); transition: 0.5s; }

        /* ë™ì  ì„ íƒì§€ ë²„íŠ¼ */
        .choice-container { display: flex; flex-direction: column; gap: 10px; }
        .choice-btn {
            background: #2a2a2a; border: 1px solid var(--border); color: #fff;
            padding: 16px; border-radius: 12px; font-weight: bold; font-size: 1rem;
            text-align: left; position: relative; overflow: hidden;
        }
        .choice-btn:active { background: var(--accent); color: #000; border-color: var(--accent); }
        .choice-btn::after { content: '>'; position: absolute; right: 20px; opacity: 0.5; }

        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.3; } }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body onclick="startGame()">

    <div id="splash">
        <div class="logo-title">EVERBLOOM</div>
        <div class="touch-hint">íƒ­í•˜ì—¬ ì—¬ì •ì„ ì‹œì‘í•˜ì‹­ì‹œì˜¤</div>
    </div>

    <div id="game-root">
        <header>
            <div style="font-weight: 900; color: var(--accent);">EVERBLOOM CHRONICLES</div>
            <div id="turn-txt">Day 1</div>
        </header>

        <div class="visual-box">
            <img id="main-img" src="https://img.freepik.com/free-photo/mystical-ancient-ruins-forest-digital-art_23-2151121014.jpg">
            <div class="location-tag" id="loc-name">ì—ë²„ë¸”ë£¸ ìˆ² ì…êµ¬</div>
        </div>

        <div class="log-area" id="log-box">
            <p class="log-p event">ìƒˆë¡œìš´ ìš´ëª…ì´ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
            <p class="log-p">ë‹¹ì‹ ì€ ê³ ëŒ€ ë™ì„œì–‘ì˜ ìœ ì‚°ì´ ì ë“  ì—ë²„ë¸”ë£¸ ìˆ²ì— ë„ì°©í–ˆìŠµë‹ˆë‹¤. ì–´ë””ë¡œ í–¥í•˜ì‹œê² ìŠµë‹ˆê¹Œ?</p>
        </div>

        <footer>
            <div class="stats-grid">
                <div>â¤ï¸ ìƒëª…ë ¥ <div class="bar-wrap"><div id="hp-bar" class="bar-fill" style="width: 100%"></div></div></div>
                <div>ğŸ¾ í« ìœ ëŒ€ê° <div class="bar-wrap"><div id="aff-bar" class="bar-fill" style="width: 30%"></div></div></div>
            </div>
            <div class="choice-container" id="choices">
                </div>
        </footer>
    </div>

<script>
    let isStarted = false;
    let turn = 1;
    let hp = 100;
    let affection = 30;

    // TRPG ì‹œë‚˜ë¦¬ì˜¤ ë°ì´í„° (ì¼ëŸ¬ìŠ¤íŠ¸í’ ì´ë¯¸ì§€ ê²½ë¡œ í¬í•¨)
    const scenes = {
        start: {
            img: "https://img.freepik.com/free-photo/mystical-ancient-ruins-forest-digital-art_23-2151121014.jpg",
            loc: "ìˆ²ì˜ ì…êµ¬",
            choices: [
                { text: "ğŸŒ³ ê¹Šì€ ìˆ²ìœ¼ë¡œ ë“¤ì–´ê°„ë‹¤ (íƒí—˜)", next: "forest" },
                { text: "ğŸ¡ ê·¼ì²˜ ë§ˆì„ë¡œ í–¥í•œë‹¤ (ë§ˆì„)", next: "town" }
            ]
        },
        forest: {
            img: "https://img.freepik.com/free-photo/majestic-stone-gate-mystical-forest-digital-art_23-2151121025.jpg",
            loc: "ì‹ ë¹„ë¡œìš´ ìˆ²",
            text: "ìˆ² ê¹Šì€ ê³³ì—ì„œ ë¹›ë‚˜ëŠ” ì„íŒì„ ë°œê²¬í–ˆìŠµë‹ˆë‹¤. ê³ ëŒ€ì˜ ì§€í˜œê°€ ëŠê»´ì§‘ë‹ˆë‹¤.",
            choices: [
                { text: "ğŸº ì„íŒì˜ ë¬¸ì–‘ì„ í•´ë…í•œë‹¤", next: "relic" },
                { text: "âš”ï¸ ì£¼ë³€ì˜ ìœ„í˜‘ì„ ê²½ê³„í•œë‹¤", next: "battle" },
                { text: "ğŸ¾ í«ê³¼ í•¨ê»˜ íœ´ì‹í•œë‹¤", next: "pet_event" }
            ]
        },
        town: {
            img: "https://img.freepik.com/free-photo/ancient-japanese-village-night-digital-art_23-2151025000.jpg",
            loc: "ì•ˆê°œ ë§ˆì„",
            text: "ë™ì„œì–‘ì˜ ìƒì¸ë“¤ì´ ëª¨ì¸ í™œê¸°ì°¬ ë§ˆì„ì…ë‹ˆë‹¤. ë¬´ì—‡ì„ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?",
            choices: [
                { text: "ğŸ—¡ï¸ ì¥ë¹„ë¥¼ ì •ë¹„í•œë‹¤", next: "shop" },
                { text: "ğŸº ì£¼ì ì—ì„œ ì†Œë¬¸ì„ ë“£ëŠ”ë‹¤", next: "start" }
            ]
        },
        battle: {
            img: "https://img.freepik.com/free-photo/fierce-warrior-confronting-monster-forest-digital-art_23-2151121050.jpg",
            loc: "êµì „ ì§€ì—­",
            text: "ê°•ë ¥í•œ ìˆ²ì˜ ìˆ˜í˜¸ìê°€ ë‚˜íƒ€ë‚¬ìŠµë‹ˆë‹¤! ì „íˆ¬ëŠ” í”¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.",
            choices: [
                { text: "ğŸ—¡ï¸ ì •ë©´ìœ¼ë¡œ ë§ì„œ ì‹¸ìš´ë‹¤", next: "forest" },
                { text: "ğŸ’¨ ë’¤ë¥¼ ë„ëª¨í•˜ë©° ë„ë§ì¹œë‹¤", next: "start" }
            ]
        }
    };

    function startGame() {
        if(!isStarted) {
            isStarted = true;
            document.getElementById('splash').style.opacity = '0';
            setTimeout(() => {
                document.getElementById('splash').style.display = 'none';
                document.getElementById('game-root').style.display = 'flex';
                renderScene('start');
            }, 500);
        }
    }

    function renderScene(key) {
        const scene = scenes[key];
        if(!scene) return;

        // UI ì—…ë°ì´íŠ¸
        document.getElementById('main-img').src = scene.img;
        document.getElementById('loc-name').innerText = scene.loc;
        if(scene.text) addLog(scene.text, true);

        // ì„ íƒì§€ ìƒì„±
        const container = document.getElementById('choices');
        container.innerHTML = '';
        scene.choices.forEach(c => {
            const btn = document.createElement('button');
            btn.className = 'choice-btn';
            btn.innerText = c.text;
            btn.onclick = () => {
                turn++;
                document.getElementById('turn-txt').innerText = `Day ${turn}`;
                if(c.next === 'pet_event') {
                    handlePet();
                    renderScene('forest');
                } else {
                    renderScene(c.next);
                }
            };
            container.appendChild(btn);
        });
    }

    function addLog(msg, isEvent = false) {
        const box = document.getElementById('log-box');
        const p = document.createElement('p');
        p.className = `log-p ${isEvent ? 'event' : ''}`;
        p.innerText = msg;
        box.appendChild(p);
        box.scrollTop = box.scrollHeight;
    }

    function handlePet() {
        affection = Math.min(100, affection + 15);
        document.getElementById('aff-bar').style.width = affection + '%';
        addLog("ğŸ¾ í«ê³¼ êµê°í•˜ë©° ë”°ëœ»í•œ ì‹œê°„ì„ ë³´ëƒˆìŠµë‹ˆë‹¤. í˜¸ê°ë„ê°€ í¬ê²Œ ìƒìŠ¹í•©ë‹ˆë‹¤!");
    }
</script>
</body>
</html>
