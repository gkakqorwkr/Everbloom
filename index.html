<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Everbloom Chronicles</title>
    <style>
        :root {
            --bg: #0d0d0c; --panel: #1a1a17; --accent: #d4a373; --text: #e0dcd3;
            --border: #3d3d34; --btn-bg: #2a2a26; --safe-top: env(safe-area-inset-top);
            --safe-bottom: env(safe-area-inset-bottom);
        }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Apple SD Gothic Neo', sans-serif; -webkit-tap-highlight-color: transparent; }
        
        body { 
            background: var(--bg); color: var(--text); 
            height: 100vh; height: -webkit-fill-available;
            display: flex; flex-direction: column; overflow: hidden; 
        }

        #start-screen { position: fixed; inset: 0; z-index: 9999; background: #000; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; cursor: pointer; }
        .title-main { font-size: 32px; color: var(--accent); font-weight: bold; letter-spacing: 2px; margin-bottom: 10px; }
        .title-sub { font-size: 16px; color: #888; margin-bottom: 40px; }
        .tap-msg { font-size: 14px; color: #fff; animation: blink 1.5s infinite; }

        #origin-screen { position: fixed; inset: 0; z-index: 9000; background: var(--bg); padding: 25px; padding-top: calc(var(--safe-top) + 20px); overflow-y: auto; display: none; }
        .race-card { background: var(--panel); border: 1px solid var(--border); padding: 20px; border-radius: 12px; margin-bottom: 15px; cursor: pointer; }

        header { padding: calc(var(--safe-top) + 10px) 20px 10px; background: var(--panel); border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; font-size: 14px; z-index: 100; flex-shrink: 0; }
        
        .visual-area { width: 100%; height: 25vh; position: relative; overflow: hidden; border-bottom: 2px solid var(--accent); flex-shrink: 0; }
        #bg-img { width: 100%; height: 100%; object-fit: cover; transition: 0.8s; }
        .location-tag { position: absolute; top: 15px; left: 15px; background: rgba(0,0,0,0.8); padding: 5px 12px; border-radius: 4px; border-left: 3px solid var(--accent); font-size: 12px; z-index: 10; }

        .equip-slots { display: flex; gap: 8px; padding: 10px; background: #111; justify-content: center; border-bottom: 1px solid var(--border); flex-shrink: 0; }
        .equip-box { width: 30%; height: 45px; border: 1px solid var(--border); border-radius: 6px; display: flex; flex-direction: column; align-items: center; justify-content: center; font-size: 10px; color: #666; background: rgba(255,255,255,0.03); }

        .tab-bar { display: flex; background: var(--panel); border-bottom: 1px solid var(--border); flex-shrink: 0; }
        .tab-btn { flex: 1; padding: 12px; border: none; background: none; color: #666; font-weight: bold; font-size: 12px; cursor: pointer; }
        .tab-btn.active { color: var(--accent); border-bottom: 2px solid var(--accent); }

        .main-content { 
            flex: 1; 
            overflow-y: auto; 
            padding: 15px; 
            background: #0a0a0a; 
            -webkit-overflow-scrolling: touch; 
            overscroll-behavior: contain;
        }

        #pane-log { 
            flex: none; 
            height: 140px; 
            border-bottom: 1px solid var(--border);
        }

        .log-line { margin-bottom: 8px; font-size: 13px; color: #ccc; border-left: 2px solid var(--border); padding-left: 10px; line-height: 1.6; animation: fadeIn 0.3s ease; }
        
        .grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; }
        .slot { background: #1c1c1a; padding: 12px; border-radius: 8px; border: 1px solid #333; font-size: 12px; cursor: pointer; }
        .slot.selected { border-color: var(--accent); background: #2a2a22; }

        footer { 
            background: var(--panel); 
            border-top: 1px solid var(--border); 
            padding: 12px 15px calc(var(--safe-bottom) + 12px); 
            flex-shrink: 0; 
        }
        
        #action-list { 
            display: flex; 
            flex-direction: column; 
            gap: 8px; 
        }

        .scrollable-actions {
            max-height: 220px;
            overflow-y: auto;
            overscroll-behavior: contain;
        }

        .btn { background: var(--btn-bg); color: #fff; padding: 15px; border-radius: 10px; border: 1px solid #444; font-weight: bold; text-align: center; cursor: pointer; font-size: 14px; }
        .btn:active { background: var(--accent); color: #000; }
        .btn.choice { background: #3d3d34; border-color: var(--accent); }

        @keyframes fadeIn { from { opacity: 0; transform: translateX(-5px); } to { opacity: 1; transform: translateX(0); } }
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.3; } }
    </style>
</head>
<body>

    <div id="start-screen" onclick="game.showOrigin()">
        <div class="title-main">Everbloom</div>
        <div class="title-sub">ê¸°ë¡ë˜ì§€ ì•Šì€ ì—°ëŒ€ê¸°</div>
        <div class="tap-msg">íƒ­ í•˜ì—¬ ì‹œì‘í•˜ì„¸ìš”</div>
    </div>

    <div id="origin-screen">
        <h2 style="text-align:center; color:var(--accent); margin-bottom:25px;">ì¢…ì¡±ì„ ì„ íƒí•˜ì‹­ì‹œì˜¤</h2>
        <div id="race-list"></div>
    </div>

    <div id="game-ui" style="display:none; flex-direction:column; height:100%;">
        <header>
            <div>Day.<span id="ui-day">1</span> <span id="ui-race" style="color:var(--accent)"></span></div>
            <div id="ui-gold">ğŸ’° 500G</div>
            <div id="ui-hp" style="color:#ff6b6b">â¤ 100</div>
        </header>

        <div class="visual-area">
            <div id="loc-tag" class="location-tag">ë¯¸ì§€ì˜ ìœ ì </div>
            <img id="bg-img" src="">
        </div>

        <div class="equip-slots">
            <div class="equip-box" id="eq-weapon"><b>WEAPON</b><span style="font-size:9px">Empty</span></div>
            <div class="equip-box" id="eq-armor"><b>ARMOR</b><span style="font-size:9px">Empty</span></div>
            <div class="equip-box" id="eq-pet"><b>PET</b><span style="font-size:9px">Empty</span></div>
        </div>

        <div class="tab-bar">
            <button class="tab-btn active" onclick="game.tab('log', this)">ë¡œê·¸</button>
            <button class="tab-btn" onclick="game.tab('inv', this)">ê°€ë°©</button>
            <button class="tab-btn" onclick="game.tab('pet', this)">í«/í•©ì„±</button>
            <button class="tab-btn" onclick="game.tab('ency', this)">ë°±ê³¼ì‚¬ì „</button>
        </div>

        <div id="pane-log" class="main-content"></div>
        
        <div id="pane-inv" class="main-content" style="display:none;"><div id="inv-list" class="grid"></div></div>
        <div id="pane-pet" class="main-content" style="display:none;">
            <div style="font-size:11px; margin-bottom:10px; color:var(--accent)">* 2ë§ˆë¦¬ë¥¼ ì„ íƒí•˜ì—¬ í•©ì„±ì„ ì‹œë„í•˜ì„¸ìš”.</div>
            <div id="pet-list" class="grid"></div>
        </div>
        <div id="pane-ency" class="main-content" style="display:none;"><div id="ency-list" class="grid"></div></div>

        <footer>
            <div id="action-list"></div>
        </footer>
    </div>

<script>
const DB = {
    races: [
        { id:'human', name:'ì¸ê°„', hp:100, desc:'ê· í˜• ì¡íŒ ìœ¡ì²´ì™€ ì ì‘ë ¥ì„ ê°€ì¡ŒìŠµë‹ˆë‹¤.' },
        { id:'elf', name:'ì—˜í”„', hp:80, desc:'ìì—°ê³¼ êµê°í•˜ë©° ë¯¼ì²©í•¨ì´ ë›°ì–´ë‚©ë‹ˆë‹¤.' },
        { id:'orc', name:'ì˜¤í¬', hp:150, desc:'ì••ë„ì ì¸ ì™„ë ¥ê³¼ ìƒì¡´ë ¥ì„ ìë‘í•©ë‹ˆë‹¤.' },
        { id:'beast', name:'ìˆ˜ì¸', hp:120, desc:'ì•¼ìƒì˜ ê°ê°ìœ¼ë¡œ ì¹˜ëª…íƒ€ìœ¨ì´ ë†’ìŠµë‹ˆë‹¤.' }
    ],
    locs: {
        ruin: { n: "ìŠí˜€ì§„ ìœ ì ", img: "https://image.lexica.art/full_webp/7376c968-07e3-4770-bc0f-903429215096" },
        forest: { n: "ì‹ ë¹„ë¡œìš´ ìˆ²", img: "https://image.lexica.art/full_webp/cc2057ae-e069-450f-a2e6-a94b595bb919" },
        sea: { n: "ì‹¬í•´ì˜ í•´ì•ˆ", img: "https://image.lexica.art/full_webp/1271317e-9777-4402-8611-37d3637e3d1c" },
        snow: { n: "ëˆˆ ë®ì¸ ê³ ì‚°", img: "https://image.lexica.art/full_webp/76508933-289b-433b-8263-547a06655a6d" },
        cave: { n: "ì‹¬ì—°ì˜ ë™êµ´", img: "https://image.lexica.art/full_webp/4594c798-1755-4672-8884-60ff868b1ee4" },
        village: { n: "ì•ˆì‹ì˜ ë§ˆì„", img: "https://image.lexica.art/full_webp/51351532-3580-4963-8a9d-b8733b1e967a" },
        forge: { n: "ë¶ˆíƒ€ëŠ” ëŒ€ì¥ê°„", img: "https://image.lexica.art/full_webp/1a90c017-f584-482d-80ed-4d92135a5857" }
    },
    items: Array.from({length: 40}, (_, i) => ({
        id: i, type: i%2===0?'weapon':'armor',
        name: `${['ë‚¡ì€','ê°•ì² ','ìš©ì‚¬ì˜','ì˜ê²ì˜'][i%4]} ${i%2===0?'ê²€':'ê°‘ì˜·'}`,
        stat: i+5, desc: `ì—°ëŒ€ê¸° #${i} ì¥ë¹„.`, price: (i+1)*50
    })),
    pets: Array.from({length: 10}, (_, i) => ({
        id: i, name: `${['ì•„ê¸°','ìš©ê°í•œ'][i%2]} ${['ëŠ‘ëŒ€','ìŠ¬ë¼ì„','ë¶€ì—‰ì´'][i%3]}`,
        stat: i+1, desc: `í•¨ê»˜ ì—¬í–‰í•˜ëŠ” ë™ë£Œ.`, price: 300
    }))
};

const game = {
    p: { gold:500, hp:100, inv:[], pets:[], equip:{weapon:null, armor:null, pet:null}, found:new Set(), day:1 },
    loc: 'ruin',
    selPets: [],

    showOrigin() {
        document.getElementById('start-screen').style.display = 'none';
        document.getElementById('origin-screen').style.display = 'block';
        const list = document.getElementById('race-list');
        list.innerHTML = '';
        DB.races.forEach(r => {
            const d = document.createElement('div'); d.className = 'race-card';
            d.innerHTML = `<h3>${r.name}</h3><p style="font-size:12px; color:#aaa;">${r.desc}</p>`;
            d.onclick = () => { this.p.race = r; this.p.hp = r.hp; this.start(); };
            list.appendChild(d);
        });
    },

    start() {
        document.getElementById('origin-screen').style.display = 'none';
        document.getElementById('game-ui').style.display = 'flex';
        document.getElementById('ui-race').innerText = this.p.race.name;
        this.updateStats();
        this.updateLocUI();
        this.log("ëª¨í—˜ì´ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤.");
        this.renderActions();
    },

    updateStats() {
        document.getElementById('ui-gold').innerText = `ğŸ’° ${this.p.gold}G`;
        document.getElementById('ui-hp').innerText = `â¤ ${this.p.hp}`;
        document.getElementById('ui-day').innerText = this.p.day;
        if(this.p.hp <= 0) {
            alert("ë‹¹ì‹ ì€ ì“°ëŸ¬ì¡ŒìŠµë‹ˆë‹¤... ëª¨í—˜ì´ ì¢…ë£Œë©ë‹ˆë‹¤.");
            location.reload();
        }
    },

    tab(t, el) {
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        el.classList.add('active');
        ['log','inv','pet','ency'].forEach(p => document.getElementById('pane-'+p).style.display = 'none');
        document.getElementById('pane-'+t).style.display = 'block';
        if(t === 'inv') this.renderInv();
        if(t === 'pet') this.renderPets();
        if(t === 'ency') this.renderEncy();
    },

    renderInv() {
        const list = document.getElementById('inv-list'); list.innerHTML = '';
        this.p.inv.forEach((it, i) => {
            const isEq = (this.p.equip.weapon === it || this.p.equip.armor === it);
            const d = document.createElement('div'); d.className = `slot ${isEq ? 'selected' : ''}`;
            d.innerHTML = `<b>${it.name}</b><br><small>Stat +${it.stat}</small>`;
            d.onclick = () => this.toggleEquip(it);
            list.appendChild(d);
        });
    },

    toggleEquip(it) {
        if(this.p.equip[it.type] === it) this.p.equip[it.type] = null;
        else this.p.equip[it.type] = it;
        this.updateEquipUI();
        this.renderInv();
    },

    updateEquipUI() {
        document.getElementById('eq-weapon').querySelector('span').innerText = this.p.equip.weapon?.name || 'Empty';
        document.getElementById('eq-armor').querySelector('span').innerText = this.p.equip.armor?.name || 'Empty';
        document.getElementById('eq-pet').querySelector('span').innerText = this.p.equip.pet?.name || 'Empty';
    },

    renderPets() {
        const list = document.getElementById('pet-list'); list.innerHTML = '';
        this.p.pets.forEach((pt, i) => {
            const isSel = this.selPets.includes(i);
            const d = document.createElement('div'); d.className = `slot ${isSel ? 'selected' : ''}`;
            d.innerHTML = `<b>${pt.name}</b><br><small>í•©ì„± ì¬ë£Œ</small>`;
            d.onclick = () => {
                if(isSel) this.selPets = this.selPets.filter(idx => idx !== i);
                else if(this.selPets.length < 2) this.selPets.push(i);
                this.renderPets();
                this.renderActions();
            };
            list.appendChild(d);
        });
    },

    renderEncy() {
        const list = document.getElementById('ency-list'); list.innerHTML = '';
        DB.items.slice(0, 10).forEach(it => {
            const found = this.p.found.has(it.id);
            const d = document.createElement('div'); d.className = `slot ${found ? '' : 'locked'}`;
            d.innerHTML = found ? `<b>${it.name}</b>` : `<b>???</b>`;
            list.appendChild(d);
        });
    },

    renderActions() {
        const area = document.getElementById('action-list'); 
        area.innerHTML = '';
        area.classList.remove('scrollable-actions');

        if (this.loc === 'village') {
            area.classList.add('scrollable-actions');
            this.addBtn("ğŸ›ï¸ ì—¬ê´€ (ì²´ë ¥ íšŒë³µ)", () => { this.p.hp = this.p.race.hp; this.log("ì—¬ê´€ì—ì„œ íœ´ì‹í–ˆìŠµë‹ˆë‹¤."); this.p.day++; this.updateStats(); this.renderActions(); });
            this.addBtn("âš’ï¸ ëŒ€ì¥ê°„ ë°©ë¬¸", () => { this.loc = 'forge'; this.updateLocUI(); this.renderActions(); });
            this.addBtn("ğŸ”® ì ìˆ ì§‘ (í« ê°€ì±  - 300G)", () => { this.petGacha(); this.renderActions(); });
            this.addBtn("ğŸŒ² ë§ˆì„ ë– ë‚˜ê¸°", () => { this.moveNext(); this.renderActions(); });
        } else if (this.loc === 'forge') {
            this.addBtn("ğŸ”¨ ì¥ë¹„ ì œì‘ (200G)", () => { this.forge(); this.renderActions(); });
            this.addBtn("â¬…ï¸ ë§ˆì„ ê´‘ì¥ìœ¼ë¡œ", () => { this.loc = 'village'; this.updateLocUI(); this.renderActions(); });
        } else if (this.selPets.length === 2) {
            this.addBtn("ğŸ§¬ í« í•©ì„± ì‹¤í–‰", () => { this.petFusion(); this.renderActions(); });
            this.addBtn("âŒ ì·¨ì†Œ", () => { this.selPets = []; this.renderPets(); this.renderActions(); });
        } else {
            this.addBtn("ğŸ§­ ì£¼ë³€ íƒì‚¬ (Day +1)", () => this.explore());
            this.addBtn("â›º íœ´ì‹í•˜ê¸°", () => { this.p.hp = Math.min(this.p.race.hp, this.p.hp + 10); this.p.day++; this.log("ìº í”„ì—ì„œ íœ´ì‹í–ˆìŠµë‹ˆë‹¤."); this.updateStats(); this.renderActions(); });
        }
    },

    explore() {
        this.p.day++;
        this.updateStats();
        if(Math.random() < 0.2) { 
            this.loc = 'village';
            this.updateLocUI();
            this.log("ğŸ° ì•ˆì‹ì˜ ë§ˆì„ì— ë„ì°©í–ˆìŠµë‹ˆë‹¤.");
            this.renderActions();
        } else {
            this.triggerEvent();
        }
    },

    triggerEvent() {
        const events = [
            { t: "êµ¶ì£¼ë¦° ê³ ë¸”ë¦° ë¬´ë¦¬ê°€ ë³´ê¸‰í’ˆì„ ë…¸ë¦¬ê³  ìŠµê²©í•´ì˜µë‹ˆë‹¤!", choices: [
                { n: "âš”ï¸ ê²€ì„ ë½‘ì•„ ë§ì„œ ì‹¸ìš´ë‹¤", r: () => Math.random() < 0.6 ? (this.p.gold += 100, this.log("âš”ï¸ ìŠ¹ë¦¬! ê³ ë¸”ë¦°ì˜ ì£¼ë¨¸ë‹ˆì—ì„œ 100Gë¥¼ í„¸ì–´ëƒˆìŠµë‹ˆë‹¤.")) : (this.p.hp -= 20, this.log("ğŸ’€ ìˆ˜ì  ì—´ì„¸ì— ë°€ë ¤ 20ì˜ í”¼í•´ë¥¼ ì…ê³  ë„ë§ì³¤ìŠµë‹ˆë‹¤.")) },
                { n: "ğŸ ìŒì‹ì„ ë˜ì ¸ì£¼ê³  ìœ ì¸í•œë‹¤", r: () => { this.p.gold = Math.max(0, this.p.gold - 30); this.log("ğŸ ê³ ë¸”ë¦°ë“¤ì´ ìŒì‹ì„ ë¨¹ëŠ” ì‚¬ì´ íƒˆì¶œí–ˆìŠµë‹ˆë‹¤."); }},
                { n: "ğŸ˜¤ ìœ„í˜‘ì ì¸ í•¨ì„±ì„ ì§€ë¥¸ë‹¤", r: () => Math.random() < 0.3 ? this.log("ğŸ˜¤ ê¸°ì„¸ì— ëˆŒë¦° ê³ ë¸”ë¦°ë“¤ì´ ë„ë§ê°”ìŠµë‹ˆë‹¤!") : (this.p.hp -= 10, this.log("ğŸ˜“ ëŒíŒ”ë§¤ì§ˆì— ë§ì•„ ì²´ë ¥ì´ 10 ê°ì†Œí–ˆìŠµë‹ˆë‹¤.")) }
            ]},
            { t: "ì ìë˜ ë°”ìœ„ ê³¨ë ˜ì´ ê¹¨ì–´ë‚¬ìŠµë‹ˆë‹¤. ê±°ëŒ€í•œ ë°œêµ¬ë¥´ê¸°ê°€ ì‹œì‘ë©ë‹ˆë‹¤!", choices: [
                { n: "ğŸ’ ì´ìŒìƒˆë¥¼ ë…¸ë ¤ íƒ€ê²©í•œë‹¤", r: () => Math.random() < 0.4 ? (this.loot(1.0), this.log("âœ¨ ê³¨ë ˜ì´ ë¬´ë„ˆì§€ë©° í•µì´ì—ˆë˜ ë³´ì„ì„ ë–¨ì–´ëœ¨ë ¸ìŠµë‹ˆë‹¤!")) : (this.p.hp -= 30, this.log("ğŸš‘ ê³¨ë ˜ì˜ ì£¼ë¨¹ì€ ë„ˆë¬´ ë‹¨ë‹¨í–ˆìŠµë‹ˆë‹¤. 30ì˜ í”¼í•´!")) },
                { n: "â³ ì •ì§€í•  ë•Œê¹Œì§€ ìˆ¨ì–´ìˆëŠ”ë‹¤", r: () => { this.p.day++; this.log("â³ í•œì°¸ì„ ìˆ¨ì£½ì—¬ ê¸°ë‹¤ë¦¬ì ê³¨ë ˜ì´ ë‹¤ì‹œ ì ë“¤ì—ˆìŠµë‹ˆë‹¤."); }},
                { n: "â›ï¸ ê´‘ì„ì„ ì±„êµ´í•´ë³¸ë‹¤", r: () => Math.random() < 0.7 ? (this.p.gold += 200, this.log("ğŸ’° ìš´ ì¢‹ê²Œ ê·€í•œ ê´‘ì„ì„ ë–¼ì–´ëƒˆìŠµë‹ˆë‹¤!")) : (this.p.hp -= 15, this.log("âš¡ ê³¨ë ˜ì´ í™”ê°€ ë‚˜ ë°œì„ êµ´ëŸ¬ ë„˜ì–´ì¡ŒìŠµë‹ˆë‹¤.")) }
            ]},
            { t: "ëŠªì§€ëŒ€ì—ì„œ ë…ì„ í’ˆì€ ê±°ëŒ€ íˆë“œë¼ê°€ ë¨¸ë¦¬ë¥¼ ì¹˜ì¼œë“­ë‹ˆë‹¤.", choices: [
                { n: "ğŸ”¥ ë¶ˆì„ í”¼ì›Œ ë¨¸ë¦¬ë¥¼ ì§€ì§„ë‹¤", r: () => Math.random() < 0.5 ? (this.loot(0.8), this.log("ğŸ”¥ íˆë“œë¼ê°€ ë¶ˆê¸¸ì„ ë‘ë ¤ì›Œí•˜ë©° ë³´ë¬¼ì„ ë‘ê³  ë„ë§ì¹©ë‹ˆë‹¤.")) : (this.p.hp -= 25, this.log("ğŸ¤¢ ë…ë‹ˆì— ë¬¼ë ¤ ì¤‘ë…ë˜ì—ˆìŠµë‹ˆë‹¤. ì²´ë ¥ 25 ê°ì†Œ.")) },
                { n: "ğŸŒ«ï¸ ì§„í™ì„ ë°œë¼ ëƒ„ìƒˆë¥¼ ìˆ¨ê¸´ë‹¤", r: () => this.log("ì•ˆì „í•˜ê²Œ ëŠªì„ ì§€ë‚˜ê°”ìŠµë‹ˆë‹¤.") },
                { n: "ğŸ¥š íˆë“œë¼ì˜ ì•Œì„ í›”ì¹œë‹¤", r: () => Math.random() < 0.2 ? (this.p.gold += 500, this.log("ğŸ’° ì „ì„¤ì ì¸ íˆë“œë¼ì˜ ì•Œì„ í›”ì³¤ìŠµë‹ˆë‹¤! ëŒ€ë°•ì…ë‹ˆë‹¤!")) : (this.p.hp -= 40, this.log("ğŸš‘ ë¶„ë…¸í•œ íˆë“œë¼ì—ê²Œ ì§“ë°Ÿí˜”ìŠµë‹ˆë‹¤!")) }
            ]},
            { t: "ìˆ²ì˜ ìˆ˜í˜¸ì, ì—˜í¬ ê¸°ì‚¬ê°€ ë‹¹ì‹ ì˜ ì•ê¸¸ì„ ë§‰ì•„ì„­ë‹ˆë‹¤.", choices: [
                { n: "âš”ï¸ ì •ì¤‘íˆ ê²°íˆ¬ë¥¼ ì‹ ì²­í•œë‹¤", r: () => Math.random() < 0.5 ? (this.loot(1.0), this.log("âš”ï¸ ê¸°ì‚¬ê°€ ë‹¹ì‹ ì˜ ìš©ê¸°ë¥¼ ì¸ì •í•˜ë©° ê°€ë³´ë¥¼ ê±´ë„µë‹ˆë‹¤.")) : (this.p.hp -= 15, this.log("ğŸ›¡ï¸ ê¸°ì‚¬ì˜ ë°©íŒ¨ì— ë°€ë ¤ ë’¤ë¡œ ë‚˜ë™ê·¸ë¼ì¡ŒìŠµë‹ˆë‹¤.")) },
                { n: "ğŸŒ¿ í‰í™”ì˜ ì œìŠ¤ì²˜ë¥¼ ì·¨í•œë‹¤", r: () => { this.p.hp = Math.min(this.p.race.hp, this.p.hp + 10); this.log("ğŸŒ¿ ê¸°ì‚¬ê°€ ë‹¹ì‹ ì˜ ì„ í•¨ì„ ë³´ê³  ì¶•ë³µì„ ë‚´ë ¤ì¤ë‹ˆë‹¤."); }},
                { n: "ğŸƒ ë¬´ì‹œí•˜ê³  ìˆ²ì„ ê°€ë¡œì§€ë¥¸ë‹¤", r: () => { this.p.hp -= 5; this.log("ğŸ¹ ê¸°ì‚¬ê°€ ìœ ê²½ê³  í™”ì‚´ì— íŒ”ì„ ê¸í˜”ìŠµë‹ˆë‹¤."); }}
            ]},
            { t: "ë°¤ì˜ ì¶”ì ì, ëŠ‘ëŒ€ì¸ê°„ ë¬´ë¦¬ê°€ ë‹¹ì‹ ì„ ì—ì›ŒìŒ‰ë‹ˆë‹¤.", choices: [
                { n: "ğŸº ì€ ì¥ë¹„ë¥¼ íœ˜ë‘ë¥¸ë‹¤", r: () => Math.random() < 0.7 ? (this.log("ğŸº ëŠ‘ëŒ€ë“¤ì´ ì€ì˜ ë¹›ì„ ë‘ë ¤ì›Œí•˜ë©° ë¬¼ëŸ¬ë‚©ë‹ˆë‹¤.")) : (this.p.hp -= 20, this.log("ğŸ¾ ëŠ‘ëŒ€ë“¤ì´ ë„ˆë¬´ ë¹ ë¦…ë‹ˆë‹¤! 20ì˜ í”¼í•´ë¥¼ ì…ì—ˆìŠµë‹ˆë‹¤.")) },
                { n: "ğŸŒ³ ë†’ì€ ë‚˜ë¬´ ìœ„ë¡œ ì˜¬ë¼ê°„ë‹¤", r: () => { this.p.day++; this.log("ğŸŒ™ ë°¤ì´ ì§€ë‚  ë•Œê¹Œì§€ ë‚˜ë¬´ ìœ„ì—ì„œ ë²„í…¼ìŠµë‹ˆë‹¤."); }},
                { n: "ğŸ– ê³ ê¸°ë¥¼ ë˜ì ¸ ìœ í˜¹í•œë‹¤", r: () => { this.p.gold = Math.max(0, this.p.gold - 50); this.log("ğŸ– ëŠ‘ëŒ€ë“¤ì´ ê³ ê¸°ë¥¼ ëœ¯ëŠ” ì‚¬ì´ ë„ë§ì³¤ìŠµë‹ˆë‹¤."); }}
            ]},
            { t: "ìœ ì ì˜ ìˆ˜í˜¸ìì¸ ë§ˆë²• ì¸í˜•ì´ ê³ ëŒ€ ì£¼ë¬¸ì„ ì™¸ì›ë‹ˆë‹¤.", choices: [
                { n: "âš¡ ë§ˆë ¥ íšŒë¡œë¥¼ ì°¨ë‹¨í•œë‹¤", r: () => Math.random() < 0.4 ? (this.loot(1.0), this.log("âš¡ ì¸í˜•ì´ ë©ˆì¶”ê³  ê·€í•œ ë§ˆë ¥ í•µì´ ë…¸ì¶œë˜ì—ˆìŠµë‹ˆë‹¤.")) : (this.p.hp -= 20, this.log("ğŸ’¥ ë²ˆê°œ ë§ˆë²•ì— ì •í†µìœ¼ë¡œ ë§ì•˜ìŠµë‹ˆë‹¤!")) },
                { n: "âœ¨ ê±°ìš¸ë¡œ ë§ˆë²•ì„ ë°˜ì‚¬í•œë‹¤", r: () => Math.random() < 0.6 ? this.log("âœ¨ ë§ˆë²•ì´ ë°˜ì‚¬ë˜ì–´ ì¸í˜•ì´ ìŠ¤ìŠ¤ë¡œ íŒŒê´´ë˜ì—ˆìŠµë‹ˆë‹¤.") : (this.p.hp -= 10, this.log("ğŸ‘“ ê±°ìš¸ì´ ê¹¨ì§€ë©° íŒŒí¸ì— ë‹¤ì³¤ìŠµë‹ˆë‹¤.")) },
                { n: "ğŸ¦¾ ëª¸í†µ ë°•ì¹˜ê¸°!", r: () => { this.p.hp -= 5; this.log("ğŸ¦¾ ì¸í˜•ì€ ë„˜ì–´ì¡Œì§€ë§Œ ë‹¹ì‹ ì˜ ì–´ê¹¨ë„ ì•„í”•ë‹ˆë‹¤."); }}
            ]},
            { t: "ê¸¸ì„ ìƒì€ ì‚¬ë‚˜ìš´ ê³°ì´ ë‹¹ì‹ ì˜ ê°€ë°© ëƒ„ìƒˆë¥¼ ë§¡ì•˜ìŠµë‹ˆë‹¤.", choices: [
                { n: "ğŸ» ì£½ì€ ì²™ì„ í•œë‹¤", r: () => Math.random() < 0.7 ? this.log("ğŸ» ê³°ì´ ëƒ„ìƒˆë§Œ ë§¡ê³  í¥ë¯¸ë¥¼ ìƒì—ˆìŠµë‹ˆë‹¤.") : (this.p.hp -= 30, this.log("ğŸ’€ ê³°ì´ ë‹¹ì‹ ì„ ë¨¹ì´ë¡œ ì°©ê°í•˜ê³  ê³µê²©í•©ë‹ˆë‹¤!")) },
                { n: "ğŸ”¥ ë¶ˆì„ í”¼ì›Œ ìœ„í˜‘í•œë‹¤", r: () => this.log("ğŸ”¥ ê³°ì´ ë†€ë¼ ìˆ²ì†ìœ¼ë¡œ ì‚¬ë¼ì¡ŒìŠµë‹ˆë‹¤.") },
                { n: "ğŸ¾ ìŒì‹ì„ ì£¼ê³  ì¹œêµ¬ê°€ ëœë‹¤", r: () => { this.p.gold = Math.max(0, this.p.gold - 100); this.log("ğŸ¾ ê³°ì´ ìŒì‹ì„ ë¨¹ê³  ê¸¸ì„ ë¹„ì¼œì¤ë‹ˆë‹¤."); }}
            ]},
            { t: "ì‚¬ì•…í•œ ê°•ë ¹ìˆ ì‚¬ê°€ ë‹¹ì‹ ì˜ ê·¸ë¦¼ìë¥¼ ë¹¼ì•—ìœ¼ë ¤ í•©ë‹ˆë‹¤.", choices: [
                { n: "ğŸ”® ì˜ì§€ë¡œ ê·¸ë¦¼ìë¥¼ ë¶™ì¡ëŠ”ë‹¤", r: () => Math.random() < 0.6 ? (this.log("ğŸ”® ê°•ë ¹ìˆ ì‚¬ê°€ ì—­í’ì„ ë§ê³  ë¬¼ëŸ¬ë‚©ë‹ˆë‹¤.")) : (this.p.hp -= 20, this.log("ğŸ’€ ì˜í˜¼ì˜ ì¼ë¶€ë¥¼ ìƒì–´ë²„ë¦° ê¸°ë¶„ì…ë‹ˆë‹¤.")) },
                { n: "â˜€ï¸ íƒœì–‘ì„ì„ ë˜ì§„ë‹¤", r: () => { this.p.gold = Math.max(0, this.p.gold - 50); this.log("â˜€ï¸ ë°ì€ ë¹›ì— ê°•ë ¹ìˆ ì‚¬ê°€ ë¹„ëª…ì„ ì§€ë¥´ë©° ì‚¬ë¼ì§‘ë‹ˆë‹¤."); }},
                { n: "ğŸ©¸ ìì‹ ì˜ í”¼ë¥¼ ë°”ì³ ê±°ë˜í•œë‹¤", r: () => { this.p.hp -= 30; this.loot(1.0); this.log("ğŸ©¸ í”¼ë¥¼ ëŒ€ê°€ë¡œ ê°•ë ¥í•œ ì¥ë¹„ë¥¼ ì–»ì—ˆìŠµë‹ˆë‹¤."); }}
            ]},
            { t: "ë°”ëŒì˜ ì •ë ¹ì´ íšŒì˜¤ë¦¬ë°”ëŒì„ ì¼ìœ¼í‚¤ë©° ì¥ë‚œì„ ì¹©ë‹ˆë‹¤.", choices: [
                { n: "ğŸŒªï¸ ë°”ëŒì— ëª¸ì„ ë§¡ê¸´ë‹¤", r: () => Math.random() < 0.5 ? (this.p.day--, this.log("ğŸŒªï¸ ë°”ëŒì´ ë‹¹ì‹ ì„ ë©€ë¦¬ ë°ë ¤ë‹¤ì£¼ì–´ ì‹œê°„ì´ ë‹¨ì¶•ë˜ì—ˆìŠµë‹ˆë‹¤!")) : (this.p.hp -= 15, this.log("ğŸš‘ ë°”ë‹¥ì— ê±°ê¾¸ë¡œ ì²˜ë°•í˜”ìŠµë‹ˆë‹¤.")) },
                { n: "ğŸ—¿ ë¬´ê±°ìš´ ëŒì„ ë¶™ì¡ëŠ”ë‹¤", r: () => this.log("í­í’ì´ ì§€ë‚˜ê°ˆ ë•Œê¹Œì§€ ë²„í…¼ìŠµë‹ˆë‹¤.") },
                { n: "ğŸ¶ ì •ë ¹ì—ê²Œ ë…¸ë˜ë¥¼ ë¶ˆëŸ¬ì¤€ë‹¤", r: () => { this.p.hp = Math.min(this.p.race.hp, this.p.hp + 20); this.log("ğŸ¶ ì •ë ¹ì´ ê¸°ë»í•˜ë©° ì¹˜ìœ ì˜ ì‚°ë“¤ë°”ëŒì„ ë³´ëƒ…ë‹ˆë‹¤."); }}
            ]},
            { t: "ì§€ì˜¥ì˜ ì‚¬ëƒ¥ê°œ, í—¬í•˜ìš´ë“œê°€ ê¸¸ëª©ì„ ì§€í‚¤ê³  ìˆìŠµë‹ˆë‹¤.", choices: [
                { n: "â„ï¸ ëƒ‰ê¸° ë§ˆë²•ìœ¼ë¡œ ì œì••í•œë‹¤", r: () => Math.random() < 0.6 ? (this.loot(0.7), this.log("â„ï¸ ë¶ˆê¸¸ì´ ì‹ì€ ì‚¬ëƒ¥ê°œëŠ” ë¬´ê¸°ë ¥í•´ì¡ŒìŠµë‹ˆë‹¤.")) : (this.p.hp -= 25, this.log("ğŸ”¥ í™”ì—¼ ìˆ¨ê²°ì— ì˜·ì´ ë‹¤ íƒ”ìŠµë‹ˆë‹¤.")) },
                { n: "ğŸ’¦ ë¬¼ì›…ë©ì´ë¡œ ìœ ì¸í•œë‹¤", r: () => this.log("ğŸ’¦ ì¹˜ìµ ì†Œë¦¬ì™€ í•¨ê»˜ ì‚¬ëƒ¥ê°œê°€ ë„ë§ê°”ìŠµë‹ˆë‹¤.") },
                { n: "âœ¨ ì„±ìˆ˜ë¥¼ ë¿Œë¦°ë‹¤", r: () => { this.p.gold = Math.max(0, this.p.gold - 30); this.log("âœ¨ ì‹ ì„±í•œ í˜ì— ê´´ìˆ˜ê°€ ì¬ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤."); }}
            ]},
            { t: "ì²œì¥ì— ì•„ìŠ¬ì•„ìŠ¬í•˜ê²Œ ë§¤ë‹¬ë¦° ê±°ëŒ€í•œ ìˆ˜ì •ì„ ë°œê²¬í–ˆìŠµë‹ˆë‹¤.", choices: [
                { n: "ğŸ’ ëŒì„ ë˜ì ¸ ë–¨ì–´ëœ¨ë¦°ë‹¤", r: () => Math.random() < 0.4 ? (this.p.gold += 300, this.log("ğŸ’° ìˆ˜ì •ì´ ë¶€ì„œì§€ë©° ë³´ì„ ì¡°ì„ì´ ìŸì•„ì§‘ë‹ˆë‹¤!")) : (this.p.hp -= 20, this.log("ğŸ’¥ ìˆ˜ì •ì´ ë‹¹ì‹  ìœ„ë¡œ ë–¨ì–´ì¡ŒìŠµë‹ˆë‹¤!")) },
                { n: "âœ¨ ë§ˆë ¥ë§Œ í¡ìˆ˜í•œë‹¤", r: () => { this.p.hp = Math.min(this.p.race.hp, this.p.hp + 15); this.log("âœ¨ ì‹ ë¹„í•œ ë§ˆë ¥ì´ ì˜¨ëª¸ì— í¼ì§‘ë‹ˆë‹¤."); }},
                { n: "ğŸƒ ë¬´ì‹œí•œë‹¤", r: () => this.log("ìœ„í—˜í•´ ë³´ì—¬ ê·¸ëƒ¥ ì§€ë‚˜ì³¤ìŠµë‹ˆë‹¤.") }
            ]},
            { t: "ì˜¤ë˜ëœ ë„ì„œê´€ì—ì„œ ë¨¼ì§€ ìŒ“ì¸ ë§ˆë²•ì„œë¥¼ ë°œê²¬í–ˆìŠµë‹ˆë‹¤.", choices: [
                { n: "ğŸ“œ ì±…ì„ í¼ì³ ì •ë…í•œë‹¤", r: () => Math.random() < 0.3 ? (this.p.gold += 150, this.log("ğŸ“œ ë³´ë¬¼ì˜ ìœ„ì¹˜ë¥¼ ê¸°ë¡í•œ ì§€ë„ë¥¼ ì°¾ì•˜ìŠµë‹ˆë‹¤!")) : (this.p.hp -= 10, this.log("ğŸ‘ï¸ ì§€ë…í•œ ë¨¼ì§€ ë•Œë¬¸ì— ëˆˆë³‘ì´ ë‚¬ìŠµë‹ˆë‹¤.")) },
                { n: "ğŸ’ ì±…ì„ í†µì§¸ë¡œ ì±™ê¸´ë‹¤", r: () => { this.p.inv.push(DB.items[0]); this.log("ğŸ’ ë¬´ê±°ìš´ ì±…ì„ ê°€ë°©ì— ë„£ì—ˆìŠµë‹ˆë‹¤."); }},
                { n: "ğŸ”¥ ì±…ì„ ë•”ê°ìœ¼ë¡œ ì“´ë‹¤", r: () => { this.p.hp = Math.min(this.p.race.hp, this.p.hp + 5); this.log("ğŸ”¥ ë”°ëœ»í•œ ë¶ˆê°€ì—ì„œ ì ì‹œ ì‰¬ì—ˆìŠµë‹ˆë‹¤."); }}
            ]},
            { t: "ë°”ë‹¥ì— ë³µì¡í•œ ë¬¸ì–‘ì˜ ì••ë ¥íŒ í•¨ì •ì´ ê¹”ë ¤ ìˆìŠµë‹ˆë‹¤.", choices: [
                { n: "ğŸ‘£ ì¡°ì‹¬íˆ ê±´ë„Œë‹¤", r: () => Math.random() < 0.7 ? this.log("ğŸ‘£ ë‹¤í–‰íˆ í•¨ì •ì´ ì‘ë™í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.") : (this.p.hp -= 15, this.log("ğŸ¹ í™”ì‚´ í•¨ì •ì´ ë°œë™í–ˆìŠµë‹ˆë‹¤!")) },
                { n: "ğŸ’¥ ëŒì„ êµ´ë ¤ ë¯¸ë¦¬ í„°ëœ¨ë¦°ë‹¤", r: () => { this.p.day++; this.log("ğŸ’¥ í•¨ì •ë“¤ì´ ëª¨ë‘ í„°ì§ˆ ë•Œê¹Œì§€ ê¸°ë‹¤ë ¸ìŠµë‹ˆë‹¤."); }},
                { n: "ğŸ› ï¸ í•¨ì •ì„ í•´ì²´í•´ë³¸ë‹¤", r: () => Math.random() < 0.4 ? (this.p.gold += 100, this.log("ğŸ’° í•¨ì • ì¥ì¹˜ì—ì„œ ê¸ˆë‹ˆë¥¼ ë½‘ì•„ëƒˆìŠµë‹ˆë‹¤!")) : (this.p.hp -= 20, this.log("âš¡ í•´ì²´ ì¤‘ ê°ì „ë˜ì—ˆìŠµë‹ˆë‹¤!")) }
            ]},
            { t: "ê±°ìš¸ì˜ ë°©ì— ë“¤ì–´ì„œì ë‹¹ì‹ ì˜ ë³µì œí’ˆì´ ë‚˜íƒ€ë‚¬ìŠµë‹ˆë‹¤.", choices: [
                { n: "âš”ï¸ ë³µì œí’ˆê³¼ ëŒ€ê²°í•œë‹¤", r: () => Math.random() < 0.5 ? (this.loot(1.0), this.log("âš”ï¸ ìì‹ ì„ ì´ê²¨ë‚´ê³  í•œê³„ë¥¼ ëŒíŒŒí–ˆìŠµë‹ˆë‹¤!")) : (this.p.hp -= 30, this.log("ğŸ’€ ë³µì œí’ˆì˜ ê²€ìˆ ì´ ë‹¹ì‹ ë³´ë‹¤ ë›°ì–´ë‚¬ìŠµë‹ˆë‹¤!")) },
                { n: "ğŸ”¨ ê±°ìš¸ì„ ê¹¨ë²„ë¦°ë‹¤", r: () => { this.p.hp -= 5; this.log("ğŸ”¨ ì†ì„ ì¢€ ë‹¤ì³¤ì§€ë§Œ í™˜ì˜ì—ì„œ ë²—ì–´ë‚¬ìŠµë‹ˆë‹¤."); }},
                { n: "ğŸ§˜ ëˆˆì„ ê°ê³  ì§€ë‚˜ê°„ë‹¤", r: () => this.log("ë§ˆìŒì˜ í‰ì˜¨ì„ ìœ ì§€í•˜ë©° ë°©ì„ í†µê³¼í–ˆìŠµë‹ˆë‹¤.") }
            ]},
            { t: "ë‹¤ë¦¬ ë°‘ì— ì‚¬ëŠ” íŠ¸ë¡¤ì´ í†µí–‰ë£Œë¥¼ ìš”êµ¬í•©ë‹ˆë‹¤.", choices: [
                { n: "ğŸ’° í†µí–‰ë£Œ ì§€ë¶ˆ (50G)", r: () => { if(this.p.gold >= 50) { this.p.gold -= 50; this.log("ğŸ’° íŠ¸ë¡¤ì´ ê¸°ë¶„ ì¢‹ê²Œ ë‹¤ë¦¬ë¥¼ ë¹„ì¼œì¤ë‹ˆë‹¤."); } else { this.p.hp -= 20; this.log("ğŸ‘Š ëˆì´ ì—†ì íŠ¸ë¡¤ì´ ì£¼ë¨¹ì„ íœ˜ë‘ë¦…ë‹ˆë‹¤!"); } }},
                { n: "ğŸ—£ï¸ ë§ë‹¤íˆ¼ì„ í•œë‹¤", r: () => Math.random() < 0.4 ? this.log("ğŸ—£ï¸ íŠ¸ë¡¤ì´ ë§ì‹¸ì›€ì—ì„œ ì§€ì ìš¸ë©´ì„œ ë„ë§ê°”ìŠµë‹ˆë‹¤.") : (this.p.hp -= 15, this.log("ğŸ‘Š íŠ¸ë¡¤ì˜ ì£¼ë¨¹ì€ ë§ë³´ë‹¤ ë¹¨ëìŠµë‹ˆë‹¤.")) },
                { n: "ğŸŠ ìˆ˜ì˜í•´ì„œ ê±´ë„Œë‹¤", r: () => Math.random() < 0.6 ? this.log("ğŸŠ ì˜·ì€ ì –ì—ˆì§€ë§Œ ëˆì€ ì•„ê¼ˆìŠµë‹ˆë‹¤.") : (this.p.hp -= 10, this.log("ğŸ¥¶ ê°•ë¬¼ì´ ë„ˆë¬´ ì°¨ê°€ì›Œ ê°ê¸°ì— ê±¸ë ¸ìŠµë‹ˆë‹¤.")) }
            ]},
            { t: "ìƒì²˜ ì…ì€ ìœ ë‹ˆì½˜ì´ ë¤ë¶ˆì— ê±¸ë ¤ ìˆìŠµë‹ˆë‹¤.", choices: [
                { n: "ğŸ¦„ ë¤ë¶ˆì„ ì œê±°í•´ì¤€ë‹¤", r: () => { this.p.hp = this.p.race.hp; this.log("ğŸ¦„ ìœ ë‹ˆì½˜ì˜ ë¿”ì´ ë¹›ë‚˜ë©° ëª¨ë“  ìƒì²˜ë¥¼ ì¹˜ìœ í•´ì¤ë‹ˆë‹¤."); }},
                { n: "ğŸ’ ë¿”ì„ ë…¸ë¦°ë‹¤ (ê·¹ì•…)", r: () => Math.random() < 0.05 ? (this.p.gold += 2000, this.log("ğŸ’° ì—„ì²­ë‚œ ê°’ì–´ì¹˜ì˜ ë¿”ì„ ì–»ì—ˆìŠµë‹ˆë‹¤.")) : (this.p.hp -= 50, this.log("ğŸš‘ ìœ ë‹ˆì½˜ì˜ ë’·ë°œì°¨ê¸°ì— ë‚ ì•„ê°”ìŠµë‹ˆë‹¤!")) },
                { n: "ğŸŒ¿ ë©€ë¦¬ì„œ ì§€ì¼œë³¸ë‹¤", r: () => this.log("ìœ ë‹ˆì½˜ì´ ìŠ¤ìŠ¤ë¡œ íƒˆì¶œí•˜ëŠ” ê²ƒì„ ì§€ì¼œë³´ì•˜ìŠµë‹ˆë‹¤.") }
            ]},
            { t: "ì‹œê°„ì˜ ì‹ ì´ ë‚˜íƒ€ë‚˜ ë‹¹ì‹ ì˜ ì¼ì£¼ì¼ì„ ê°€ì ¸ê°€ë ¤ í•©ë‹ˆë‹¤.", choices: [
                { n: "â³ ìˆœìˆœíˆ ë‚´ì–´ì¤€ë‹¤ (+7ì¼)", r: () => { this.p.day += 7; this.p.gold += 1000; this.log("â³ 7ì¼ì´ ì§€ë‚¬ì§€ë§Œ, ê·¸ ëŒ€ê°€ë¡œ 1000Gë¥¼ ë°›ì•˜ìŠµë‹ˆë‹¤."); }},
                { n: "âš”ï¸ ì‹œê°„ì˜ ì‹ ê³¼ ì‹¸ìš´ë‹¤", r: () => Math.random() < 0.05 ? (this.loot(1.0), this.log("âš”ï¸ ì‹ ì„ ì´ê²¼ìŠµë‹ˆë‹¤! ì‹œê°„ì˜ ì§€ë°°ìê°€ ë©ë‹ˆë‹¤.")) : (this.p.hp = 1, this.log("ğŸš‘ ì‹ ì˜ ì†ê°€ë½ í•˜ë‚˜ì— ì£½ê¸° ì§ì „ê¹Œì§€ ê°”ìŠµë‹ˆë‹¤.")) },
                { n: "ğŸ™ ìì‹ ì˜ ìš´ëª…ì„ ë¯¿ëŠ”ë‹¤", r: () => this.log("ì‹ ì€ ë¯¸ì†Œë¥¼ ì§€ìœ¼ë©° ì‚¬ë¼ì¡ŒìŠµë‹ˆë‹¤.") }
            ]}
        ];

        // ë¶€ì¡±í•œ 50ì¢…ì„ ì±„ìš°ê¸° ìœ„í•œ ìë™ ìƒì„± ë¡œì§ (ëœë¤ ë³´ê°•)
        while(events.length < 50) {
            const id = events.length + 1;
            events.push({
                t: `[ìš´ëª…ì˜ ê°ˆë¦¼ê¸¸ #${id}] ì•ˆê°œ ì†ì—ì„œ ì•Œ ìˆ˜ ì—†ëŠ” ê¸°ìš´ì´ ëŠê»´ì§‘ë‹ˆë‹¤.`,
                choices: [
                    { n: "ğŸ” ì¡°ì‚¬í•œë‹¤", r: () => Math.random() < 0.5 ? (this.p.gold += 50, this.log("ğŸ’° ì‘ì€ í–‰ìš´ì„ ì°¾ì•˜ìŠµë‹ˆë‹¤.")) : (this.p.hp -= 5, this.log("ğŸ˜¢ ì‘ì€ ì‚¬ê³ ë¥¼ ë‹¹í–ˆìŠµë‹ˆë‹¤.")) },
                    { n: "ğŸƒ ë¹ ë¥´ê²Œ ì§€ë‚˜ì¹œë‹¤", r: () => this.log("ì•ˆì „í•˜ê²Œ ì´ë™í–ˆìŠµë‹ˆë‹¤.") },
                    { n: "ğŸ§˜ ëª…ìƒì„ í•œë‹¤", r: () => { this.p.hp = Math.min(this.p.race.hp, this.p.hp + 5); this.log("ğŸ§˜ ì •ì‹ ì´ ë§‘ì•„ì§‘ë‹ˆë‹¤."); }}
                ]
            });
        }

        const ev = events[Math.floor(Math.random()*events.length)];
        this.log(`[ì´ë²¤íŠ¸] ${ev.t}`);
        const area = document.getElementById('action-list'); 
        area.innerHTML = '';
        area.classList.add('scrollable-actions');

        ev.choices.forEach(choice => {
            this.addBtn(choice.n, () => {
                choice.r();
                this.updateStats();
                this.renderActions();
            }, true);
        });
    },

    moveNext() {
        const keys = ['ruin','forest','sea','snow','cave'];
        this.loc = keys[Math.floor(Math.random()*keys.length)];
        this.updateLocUI();
        this.log(`${DB.locs[this.loc].n}ìœ¼ë¡œ ì´ë™í–ˆìŠµë‹ˆë‹¤.`);
    },

    updateLocUI() {
        const info = DB.locs[this.loc];
        document.getElementById('loc-tag').innerText = info.n;
        document.getElementById('bg-img').src = info.img;
    },

    loot(chance) {
        if(Math.random() < chance) {
            const it = DB.items[Math.floor(Math.random()*DB.items.length)];
            this.p.inv.push(it);
            this.p.found.add(it.id);
            this.log(`âœ¨ ë³´ìƒ íšë“: [${it.name}]!`);
            return true;
        } else {
            this.log("ìˆ˜ìƒ‰ ê²°ê³¼ ì•„ë¬´ê²ƒë„ ì–»ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.");
            return false;
        }
    },

    forge() {
        if(this.p.gold >= 200) {
            this.p.gold -= 200;
            const it = DB.items[Math.floor(Math.random()*DB.items.length)];
            this.p.inv.push(it);
            this.p.found.add(it.id);
            this.log(`âš’ï¸ ì¥ë¹„ ì œì‘ ì™„ë£Œ: [${it.name}]`);
            this.updateStats();
        } else { this.log("ê³¨ë“œê°€ ë¶€ì¡±í•©ë‹ˆë‹¤."); }
    },

    petGacha() {
        if(this.p.gold >= 300) {
            this.p.gold -= 300;
            const pt = DB.pets[Math.floor(Math.random()*DB.pets.length)];
            this.p.pets.push(pt);
            this.log(`ğŸ”® í« ë¶€í™”: [${pt.name}]`);
            this.updateStats();
        } else { this.log("ê³¨ë“œê°€ ë¶€ì¡±í•©ë‹ˆë‹¤."); }
    },

    petFusion() {
        if(this.p.pets.length >= 2) {
            this.p.pets = this.p.pets.filter((_, i) => !this.selPets.includes(i));
            const newPet = DB.pets[Math.floor(Math.random()*DB.pets.length)]; 
            this.p.pets.push(newPet);
            this.log(`ğŸ§¬ í•©ì„± ì„±ê³µ! ìƒˆë¡œìš´ ë™ë£Œ [${newPet.name}] íƒ„ìƒ.`);
            this.selPets = [];
            this.tab('pet', document.querySelectorAll('.tab-btn')[2]);
        }
    },

    log(m) {
        const p = document.getElementById('pane-log');
        const d = document.createElement('div'); d.className = 'log-line';
        d.innerText = `> ${m}`; 
        p.appendChild(d);
        if(p.childNodes.length > 100) p.removeChild(p.firstChild);
        setTimeout(() => { p.scrollTop = p.scrollHeight; }, 10);
    },
    
    addBtn(t, f, isChoice = false) {
        const b = document.createElement('div'); 
        b.className = isChoice ? 'btn choice' : 'btn';
        b.innerText = t; b.onclick = () => { f(); };
        document.getElementById('action-list').appendChild(b);
    }
};
</script>
</body>
</html>
