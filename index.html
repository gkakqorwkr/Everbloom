<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>EVERBLOOM: EryStart</title>

<style>
:root{
    --bg:#3b3331;
    --panel:#4a3e3b;
    --border:#7a6a67;
    --text:#f7e7d6;
    --accent:#c08d4b;
    --btn:#6a5e5c;
}

*{margin:0;padding:0;box-sizing:border-box;font-family:'DotGothic16','Apple SD Gothic Neo',sans-serif;}
@import url('https://fonts.googleapis.com/css2?family=DotGothic16&display=swap');

body{
    background:var(--bg);
    color:var(--text);
    height:100vh;
    display:flex;
    flex-direction:column;
}

header{
    background:var(--panel);
    border:2px solid var(--border);
    padding:10px;
    margin:8px;
    display:flex;
    justify-content:space-between;
}

main{
    margin:0 8px;
    display:flex;
    flex-direction:column;
    gap:8px;
}

/* ğŸ”¹ ë„íŠ¸ í™”ë©´ */
.scene-box{
    background:#567e6a;
    border:2px solid var(--border);
    display:flex;
    justify-content:center;
    align-items:center;
    padding:8px;
}

canvas{
    width:160px;
    height:160px;
    image-rendering:pixelated;
}

/* ğŸ”¹ ë¡œê·¸ */
.log{
    background:var(--panel);
    border:2px solid var(--border);
    padding:8px;
    height:110px;
    overflow-y:auto;
    font-size:13px;
}

.log p{margin-bottom:4px;}
.log .event{color:var(--accent);font-weight:bold;}

/* ğŸ”¹ ë²„íŠ¼ */
.controls{
    margin:8px;
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:8px;
}

button{
    background:var(--btn);
    border:1px solid var(--border);
    color:var(--text);
    padding:14px;
    font-weight:bold;
}
</style>
</head>

<body>

<header>
    <div>EVERBLOOM: EryStart</div>
    <div id="turn">í„´ 1</div>
</header>

<main>
    <div class="scene-box">
        <canvas id="scene" width="160" height="160"></canvas>
    </div>

    <div class="log" id="log">
        <p class="event">ëª¨í—˜ì´ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤!</p>
        <p>ì—ë²„ë¸”ë£¸ì˜ ê³ ëŒ€ ìˆ²ì´ ë‹¹ì‹ ì„ ë§ì´í•©ë‹ˆë‹¤.</p>
    </div>
</main>

<div class="controls">
    <button onclick="act('explore')">ğŸ” íƒí—˜</button>
    <button onclick="act('town')">ğŸ  ë§ˆì„</button>
    <button onclick="act('battle')">âš”ï¸ ì‚¬ê±´</button>
    <button onclick="act('pet')">ğŸ¾ í«</button>
</div>

<script>
let turn=1;

/* íŒ”ë ˆíŠ¸ */
const P={
    o:"#1b1b1b",
    skin:"#d7b38c", skinS:"#b38b65",
    cloth:"#7c2f2f", clothS:"#551f1f",
    grass:"#3e6b3e", grassS:"#2b4d2b",
    slime:"#9bbfb2", slimeS:"#6e9f8e",
    hair:"#3a2a20"
};

function px(c,x,y,w,h,col){
    c.fillStyle=col;
    c.fillRect(x,y,w,h);
}

/* ë°°ê²½ */
function bg(c){
    for(let y=0;y<160;y+=4)
        for(let x=0;x<160;x+=4)
            px(c,x,y,4,4,Math.random()>.5?P.grass:P.grassS);
}

/* ìºë¦­í„° (ì‚¬ëŒì²˜ëŸ¼ ë³´ì´ê²Œ) */
function hero(c,x,y){
    // ë¨¸ë¦¬
    px(c,x+4,y,8,8,P.skin);
    px(c,x+4,y+5,8,3,P.skinS);
    px(c,x+6,y+3,1,2,P.o);
    px(c,x+9,y+3,1,2,P.o);

    // ëª¸
    px(c,x+3,y+8,10,10,P.cloth);
    px(c,x+3,y+14,10,4,P.clothS);

    // ë‹¤ë¦¬
    px(c,x+4,y+18,3,8,P.hair);
    px(c,x+9,y+18,3,8,P.hair);
}

/* ìŠ¬ë¼ì„ */
function slime(c,x,y){
    px(c,x,y+6,16,10,P.slime);
    px(c,x,y+10,16,6,P.slimeS);
    px(c,x+4,y+10,2,2,P.o);
    px(c,x+10,y+10,2,2,P.o);
}

function draw(type){
    const c=document.getElementById("scene").getContext("2d");
    c.imageSmoothingEnabled=false;
    c.clearRect(0,0,160,160);
    bg(c);

    if(type==="battle"){
        hero(c,40,70);
        slime(c,90,80);
    }else{
        hero(c,70,70);
    }
}

function log(msg,event=false){
    const l=document.getElementById("log");
    const p=document.createElement("p");
    if(event)p.className="event";
    p.innerText=msg;
    l.appendChild(p);
    l.scrollTop=l.scrollHeight;
}

function act(t){
    turn++;
    document.getElementById("turn").innerText="í„´ "+turn;
    draw(t);
    log("í–‰ë™: "+t,true);
}

draw("explore");
</script>

</body>
</html>
